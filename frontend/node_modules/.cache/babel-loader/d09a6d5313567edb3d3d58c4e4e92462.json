{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/nikitajethani/Desktop/cs 4530/covey.town-master/frontend/src/components/VideoCall/VideoFrontend/components/MainParticipantInfo/MainParticipantInfo.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport AvatarIcon from '../../icons/AvatarIcon';\nimport useIsTrackSwitchedOff from '../../hooks/useIsTrackSwitchedOff/useIsTrackSwitchedOff';\nimport usePublications from '../../hooks/usePublications/usePublications';\nimport useTrack from '../../hooks/useTrack/useTrack';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\nimport useParticipantIsReconnecting from '../../hooks/useParticipantIsReconnecting/useParticipantIsReconnecting';\nimport AudioLevelIndicator from '../AudioLevelIndicator/AudioLevelIndicator'; // import useConference from '../../../../../hooks/useConference';\n\nimport useSelectedParticipant from '../VideoProvider/useSelectedParticipant/useSelectedParticipant';\nconst useStyles = makeStyles(theme => ({\n  container: {\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n    cursor: 'pointer'\n  },\n  identity: {\n    background: 'rgba(0, 0, 0, 0.5)',\n    color: 'white',\n    padding: '0.1em 0.3em 0.1em 0',\n    fontSize: '1.2em',\n    display: 'inline-flex',\n    '& svg': {\n      marginLeft: '0.3em'\n    }\n  },\n  infoContainer: {\n    position: 'absolute',\n    zIndex: 2,\n    height: '100%',\n    width: '100%'\n  },\n  reconnectingContainer: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: 'rgba(40, 42, 43, 0.75)',\n    zIndex: 1\n  },\n  fullWidth: {\n    gridArea: '1 / 1 / 2 / 3',\n    [theme.breakpoints.down('sm')]: {\n      gridArea: '1 / 1 / 3 / 3'\n    }\n  },\n  avatarContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: 'black',\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    zIndex: 1,\n    '& svg': {\n      transform: 'scale(2)'\n    }\n  }\n}));\nexport default function MainParticipantInfo({\n  participant,\n  children\n}) {\n  _s();\n\n  const classes = useStyles();\n  const {\n    room: {\n      localParticipant\n    }\n  } = useVideoContext();\n  const isLocal = localParticipant === participant; // const screenShareParticipant = useScreenShareParticipant();\n  // const isRemoteParticipantScreenSharing = screenShareParticipant && screenShareParticipant !== localParticipant;\n\n  const publications = usePublications(participant);\n  const videoPublication = publications.find(p => p.trackName.includes('camera'));\n  const screenSharePublication = publications.find(p => p.trackName.includes('screen'));\n  const setSelectedParticipant = useSelectedParticipant()[1];\n  const videoTrack = useTrack(screenSharePublication || videoPublication);\n  const isVideoEnabled = Boolean(videoTrack);\n  const audioPublication = publications.find(p => p.kind === 'audio');\n  const audioTrack = useTrack(audioPublication);\n  const isVideoSwitchedOff = useIsTrackSwitchedOff(videoTrack);\n  const isParticipantReconnecting = useParticipantIsReconnecting(participant);\n  const [participantProfile, setParticipantProfile] = useState(null); // useSafeAsync(() => UserProfile.get(participant.identity, conference.id), setParticipantProfile, [participant.identity], \"MainParticipantInfo:setParticipantProfile\");\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    \"data-cy-main-participant\": true,\n    \"data-cy-participant\": participant.identity,\n    className: clsx(classes.container, {\n      [classes.fullWidth]: false\n    }),\n    onClick: () => setSelectedParticipant(participant),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.infoContainer,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.identity,\n        children: [/*#__PURE__*/_jsxDEV(AudioLevelIndicator, {\n          audioTrack: audioTrack\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          color: \"inherit\",\n          children: [participantProfile ? participantProfile.displayName : '', isLocal && ' (You)', screenSharePublication && ' - Screen']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), (!isVideoEnabled || isVideoSwitchedOff) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.avatarContainer,\n      children: /*#__PURE__*/_jsxDEV(AvatarIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }, this), isParticipantReconnecting && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.reconnectingContainer,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        style: {\n          color: 'white'\n        },\n        children: \"Reconnecting...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }, this), children]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MainParticipantInfo, \"dVjt15N5NnkhLXh5c5+KphLPE/Q=\", false, function () {\n  return [useStyles, useVideoContext, usePublications, useSelectedParticipant, useTrack, useTrack, useIsTrackSwitchedOff, useParticipantIsReconnecting];\n});\n\n_c = MainParticipantInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainParticipantInfo\");","map":{"version":3,"sources":["/Users/nikitajethani/Desktop/cs 4530/covey.town-master/frontend/src/components/VideoCall/VideoFrontend/components/MainParticipantInfo/MainParticipantInfo.tsx"],"names":["React","useState","clsx","makeStyles","Typography","AvatarIcon","useIsTrackSwitchedOff","usePublications","useTrack","useVideoContext","useParticipantIsReconnecting","AudioLevelIndicator","useSelectedParticipant","useStyles","theme","container","position","display","alignItems","cursor","identity","background","color","padding","fontSize","marginLeft","infoContainer","zIndex","height","width","reconnectingContainer","top","right","bottom","left","justifyContent","fullWidth","gridArea","breakpoints","down","avatarContainer","transform","MainParticipantInfo","participant","children","classes","room","localParticipant","isLocal","publications","videoPublication","find","p","trackName","includes","screenSharePublication","setSelectedParticipant","videoTrack","isVideoEnabled","Boolean","audioPublication","kind","audioTrack","isVideoSwitchedOff","isParticipantReconnecting","participantProfile","setParticipantProfile","displayName"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport {\n  LocalAudioTrack, LocalVideoTrack, Participant, RemoteAudioTrack, RemoteVideoTrack,\n} from 'twilio-video';\n\nimport Typography from '@material-ui/core/Typography';\nimport AvatarIcon from '../../icons/AvatarIcon';\n\nimport useIsTrackSwitchedOff from '../../hooks/useIsTrackSwitchedOff/useIsTrackSwitchedOff';\nimport usePublications from '../../hooks/usePublications/usePublications';\nimport useTrack from '../../hooks/useTrack/useTrack';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\nimport useParticipantIsReconnecting from '../../hooks/useParticipantIsReconnecting/useParticipantIsReconnecting';\nimport AudioLevelIndicator from '../AudioLevelIndicator/AudioLevelIndicator';\n// import useConference from '../../../../../hooks/useConference';\nimport useSelectedParticipant from '../VideoProvider/useSelectedParticipant/useSelectedParticipant';\nimport { UserProfile } from '../../../../../CoveyTypes';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  container: {\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n    cursor: 'pointer',\n  },\n  identity: {\n    background: 'rgba(0, 0, 0, 0.5)',\n    color: 'white',\n    padding: '0.1em 0.3em 0.1em 0',\n    fontSize: '1.2em',\n    display: 'inline-flex',\n    '& svg': {\n      marginLeft: '0.3em',\n    },\n  },\n  infoContainer: {\n    position: 'absolute',\n    zIndex: 2,\n    height: '100%',\n    width: '100%',\n  },\n  reconnectingContainer: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: 'rgba(40, 42, 43, 0.75)',\n    zIndex: 1,\n  },\n  fullWidth: {\n    gridArea: '1 / 1 / 2 / 3',\n    [theme.breakpoints.down('sm')]: {\n      gridArea: '1 / 1 / 3 / 3',\n    },\n  },\n  avatarContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: 'black',\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    zIndex: 1,\n    '& svg': {\n      transform: 'scale(2)',\n    },\n  },\n}));\n\ninterface MainParticipantInfoProps {\n  participant: Participant;\n  children: React.ReactNode;\n}\n\nexport default function MainParticipantInfo({ participant, children }: MainParticipantInfoProps) {\n  const classes = useStyles();\n  const {\n    room: { localParticipant },\n  } = useVideoContext();\n  const isLocal = localParticipant === participant;\n\n  // const screenShareParticipant = useScreenShareParticipant();\n  // const isRemoteParticipantScreenSharing = screenShareParticipant && screenShareParticipant !== localParticipant;\n\n  const publications = usePublications(participant);\n  const videoPublication = publications.find((p) => p.trackName.includes('camera'));\n  const screenSharePublication = publications.find((p) => p.trackName.includes('screen'));\n  const setSelectedParticipant = useSelectedParticipant()[1];\n\n  const videoTrack = useTrack(screenSharePublication || videoPublication);\n  const isVideoEnabled = Boolean(videoTrack);\n\n  const audioPublication = publications.find((p) => p.kind === 'audio');\n  const audioTrack = useTrack(audioPublication) as LocalAudioTrack | RemoteAudioTrack | undefined;\n\n  const isVideoSwitchedOff = useIsTrackSwitchedOff(videoTrack as LocalVideoTrack | RemoteVideoTrack);\n  const isParticipantReconnecting = useParticipantIsReconnecting(participant);\n\n  const [participantProfile, setParticipantProfile] = useState<UserProfile | null>(null);\n  // useSafeAsync(() => UserProfile.get(participant.identity, conference.id), setParticipantProfile, [participant.identity], \"MainParticipantInfo:setParticipantProfile\");\n\n  return (\n    <div\n      data-cy-main-participant\n      data-cy-participant={participant.identity}\n      className={clsx(classes.container, {\n        [classes.fullWidth]: false,\n      })}\n      onClick={() => setSelectedParticipant(participant)}\n    >\n      <div className={classes.infoContainer}>\n        <div className={classes.identity}>\n          <AudioLevelIndicator audioTrack={audioTrack} />\n          <Typography variant=\"body1\" color=\"inherit\">\n            {participantProfile ? participantProfile.displayName : ''}\n            {isLocal && ' (You)'}\n            {screenSharePublication && ' - Screen'}\n          </Typography>\n        </div>\n      </div>\n      {(!isVideoEnabled || isVideoSwitchedOff) && (\n        <div className={classes.avatarContainer}>\n          <AvatarIcon />\n        </div>\n      )}\n      {isParticipantReconnecting && (\n        <div className={classes.reconnectingContainer}>\n          <Typography variant=\"body1\" style={{ color: 'white' }}>\n            Reconnecting...\n          </Typography>\n        </div>\n      )}\n      {children}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}